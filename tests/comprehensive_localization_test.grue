messages {
    prompt: "Comando: ",
    unknown_command: "No comprendo ese comando.\n",

    // Test additional message contexts
    cant_see_that: "No puedes ver eso aquí.",
    cant_go_that_way: "No puedes ir en esa dirección.",
    already_have_that: "Ya tienes eso.",
    cant_take_that: "No puedes tomar eso.",
}

world {
    room sala_inicio "Sala de Prueba" {
        desc: "Estás en una sala de pruebas con descripciones en español. Hay una puerta al norte."

        exits: {
            north: segunda_sala
        }

        object libro_magico {
            names: ["libro", "book", "magic"]
            desc: "Un libro mágico con texto en español."
            takeable: true
        }

        object mesa_pesada {
            names: ["mesa", "table", "desk"]
            desc: "Una mesa muy pesada que no se puede mover."
            takeable: false
        }
    }

    room segunda_sala "Laboratorio Mágico" {
        desc: "Un laboratorio lleno de pociones y pergaminos antiguos."

        exits: {
            south: sala_inicio
        }

        object pocion_azul {
            names: ["pocion", "potion", "blue", "azul"]
            desc: "Una poción azul que brilla con luz propia."
            takeable: true
        }
    }
}

grammar {
    verb "examinar" {
        noun => examinar_objeto($noun)
    }

    verb "mirar", "look" {
        default => mirar_habitacion()
    }

    verb "tomar", "take" {
        noun => tomar_objeto($noun)
    }

    verb "inventario", "i", "inventory" {
        default => mostrar_inventario()
    }

    verb "north", "norte", "n" {
        default => ir_norte()
    }

    verb "south", "sur", "s" {
        default => ir_sur()
    }
}

fn examinar_objeto(objeto) {
    if (player_can_see(objeto)) {
        print(objeto.desc);
        new_line();
    } else {
        print("No puedes ver ese objeto aquí.");
        new_line();
    }
}

fn mirar_habitacion() {
    print(player.location.desc);
    new_line();
    new_line();
    print("Puedes ver:");
    new_line();

    // List objects in Spanish
    if (libro_magico.location == player.location) {
        print("- un libro mágico");
        new_line();
    }
    if (mesa_pesada.location == player.location) {
        print("- una mesa pesada");
        new_line();
    }
    if (pocion_azul.location == player.location) {
        print("- una poción azul");
        new_line();
    }
}

fn tomar_objeto(objeto) {
    if (!player_can_see(objeto)) {
        print("No puedes ver ese objeto aquí.");
        new_line();
        return;
    }

    if (objeto == mesa_pesada) {
        print("La mesa es demasiado pesada para moverla.");
        new_line();
        return;
    }

    if (objeto.location == player) {
        print("Ya tienes eso.");
        new_line();
        return;
    }

    move(objeto, player);
    print("Tomado.");
    new_line();
}

fn mostrar_inventario() {
    print("Llevas:");
    new_line();

    if (libro_magico.location == player) {
        print("- un libro mágico");
        new_line();
    }
    if (pocion_azul.location == player) {
        print("- una poción azul");
        new_line();
    }

    // Check if inventory is empty
    if (libro_magico.location != player && pocion_azul.location != player) {
        print("No llevas nada.");
        new_line();
    }
}

fn ir_norte() {
    move(player, segunda_sala);
    print("Te diriges hacia el norte.");
    new_line();
    mirar_habitacion();
}

fn ir_sur() {
    if (player.location == segunda_sala) {
        move(player, sala_inicio);
        print("Regresas hacia el sur.");
        new_line();
        mirar_habitacion();
    } else {
        print("La puerta sur está cerrada con llave.");
        new_line();
    }
}

init {
    player.location = sala_inicio;
    print("=== PRUEBA COMPLETA DE LOCALIZACIÓN ===");
    new_line();
    print("Este juego prueba textos localizados en:");
    new_line();
    print("- Descripciones de habitaciones");
    new_line();
    print("- Descripciones de objetos");
    new_line();
    print("- Mensajes de sistema");
    new_line();
    print("- Texto de interacciones");
    new_line();
    print("");
    print("Comandos: mirar, examinar [objeto], tomar [objeto], inventario, north, south");
    new_line();
    print("");
    mirar_habitacion();
}